<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multi-Agent Healthcare Demo</title>
    <link rel="stylesheet" href="/static/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
</head>
<body>
    <div class="demo-app">
        <!-- Header -->
        <header class="demo-header">
            <div class="header-brand">
                <div class="logo">
                    <svg viewBox="0 0 32 32" fill="none">
                        <rect width="32" height="32" rx="8" fill="url(#logo-gradient)"/>
                        <path d="M16 8v16M8 16h16" stroke="white" stroke-width="3" stroke-linecap="round"/>
                        <defs>
                            <linearGradient id="logo-gradient" x1="0" y1="0" x2="32" y2="32">
                                <stop stop-color="#6366f1"/>
                                <stop offset="1" stop-color="#8b5cf6"/>
                            </linearGradient>
                        </defs>
                    </svg>
                </div>
                <div class="brand-info">
                    <h1>Multi-Agent Healthcare CX</h1>
                    <p>Real-time AI orchestration demo</p>
                </div>
            </div>
            <div class="header-actions">
                <button class="btn btn-ghost" id="jsonBtn">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M16 18l6-6-6-6M8 6l-6 6 6 6"/></svg>
                    JSON
                </button>
                <button class="btn btn-danger" id="resetBtn">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8M3 3v5h5"/></svg>
                    Reset
                </button>
            </div>
        </header>

        <!-- Main Content -->
        <div class="demo-content">
            <!-- Left: Agent Flow & Scenarios -->
            <aside class="flow-panel">
                <!-- Agent Architecture -->
                <section class="flow-section">
                    <h3 class="section-title">Agent Architecture</h3>
                    <div class="agent-flow">
                        <div class="agent-card orchestrator" id="agentOrch">
                            <div class="agent-glow"></div>
                            <div class="agent-icon">ðŸŽ¯</div>
                            <div class="agent-name">Orchestrator</div>
                            <div class="agent-role">Coordination</div>
                        </div>
                        <div class="flow-lines">
                            <svg class="flow-svg" viewBox="0 0 200 40">
                                <path id="line1" class="flow-line" d="M40,0 L40,20 L0,40" fill="none" stroke-width="2"/>
                                <path id="line2" class="flow-line" d="M160,0 L160,20 L200,40" fill="none" stroke-width="2"/>
                            </svg>
                        </div>
                        <div class="agent-row">
                            <div class="agent-card servicenow" id="agentSN">
                                <div class="agent-glow"></div>
                                <div class="agent-icon">ðŸ”§</div>
                                <div class="agent-name">ServiceNow</div>
                                <div class="agent-role">Billing & Tickets</div>
                            </div>
                            <div class="agent-card salesforce" id="agentSF">
                                <div class="agent-glow"></div>
                                <div class="agent-icon">ðŸ‘¤</div>
                                <div class="agent-name">Salesforce</div>
                                <div class="agent-role">Patient Data</div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Demo Scenarios -->
                <section class="flow-section">
                    <h3 class="section-title">Demo Scenarios</h3>
                    <div class="scenario-list">
                        <button class="scenario-btn primary" data-msg="Hi, I'm Maria Santos and my patient ID is PAT-2847. I just got a bill for $2,400 for my cardiology visit with Dr. Patel on January 15th. This seems way too high - I have good insurance through Blue Cross. Can you look into this?">
                            <span class="scenario-num">1</span>
                            <div class="scenario-content">
                                <div class="scenario-title">Start: Billing Dispute</div>
                                <div class="scenario-desc">Patient reports $2,400 overcharge</div>
                            </div>
                        </button>
                        <button class="scenario-btn" data-msg="Yes, please fix the billing error for patient PAT-2847 and make sure my insurance gets charged correctly.">
                            <span class="scenario-num">2</span>
                            <div class="scenario-content">
                                <div class="scenario-title">Approve Correction</div>
                                <div class="scenario-desc">Confirm the billing fix</div>
                            </div>
                        </button>
                        <button class="scenario-btn" data-msg="Hi, I'm patient PAT-2847. What's my insurance coverage and deductible status?">
                            <span class="scenario-num">3</span>
                            <div class="scenario-content">
                                <div class="scenario-title">Check Coverage</div>
                                <div class="scenario-desc">Verify insurance details</div>
                            </div>
                        </button>
                    </div>
                </section>

                <!-- Metrics -->
                <section class="flow-section metrics-section" id="metricsSection" style="display:none">
                    <h3 class="section-title">Performance</h3>
                    <div class="metrics-grid">
                        <div class="metric-box">
                            <div class="metric-val" id="mTime">--</div>
                            <div class="metric-lbl">Duration</div>
                        </div>
                        <div class="metric-box">
                            <div class="metric-val" id="mTokens">--</div>
                            <div class="metric-lbl">Tokens</div>
                        </div>
                        <div class="metric-box">
                            <div class="metric-val" id="mCost">--</div>
                            <div class="metric-lbl">Est. Cost</div>
                        </div>
                    </div>
                    <div class="timing-visual" id="timingVisual"></div>
                </section>
            </aside>

            <!-- Center: Chat -->
            <main class="chat-panel">
                <div class="chat-messages" id="chatArea">
                    <div class="msg msg-assistant">
                        <div class="msg-bubble">
                            <p><strong>Welcome to MidAtlantic Health!</strong></p>
                            <p>I'm your AI assistant. I can help with:</p>
                            <ul>
                                <li>Billing questions & disputes</li>
                                <li>Insurance verification</li>
                                <li>Appointment scheduling</li>
                            </ul>
                            <p>Try the demo scenarios on the left, or type your own question.</p>
                        </div>
                    </div>
                </div>
                <div class="chat-input">
                    <textarea id="msgInput" placeholder="Ask about billing, insurance, or appointments..." rows="1"></textarea>
                    <button class="send-btn" id="sendBtn" disabled>
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"/>
                        </svg>
                    </button>
                </div>
            </main>

            <!-- Right: Activity Trace -->
            <aside class="trace-panel">
                <div class="trace-header">
                    <h3 class="section-title">Agent Activity</h3>
                    <div class="trace-status" id="traceStatus">
                        <span class="status-dot"></span>
                        <span class="status-text">Idle</span>
                    </div>
                </div>
                <div class="trace-list" id="traceList">
                    <div class="trace-empty">
                        <div class="empty-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                <circle cx="12" cy="12" r="10"/>
                                <path d="M12 6v6l4 2"/>
                            </svg>
                        </div>
                        <p>Agent activity will appear here</p>
                        <p class="empty-hint">Click a demo scenario to start</p>
                    </div>
                </div>
            </aside>
        </div>
    </div>

    <!-- JSON Modal -->
    <div class="modal" id="jsonModal">
        <div class="modal-overlay"></div>
        <div class="modal-box">
            <div class="modal-head">
                <span>Raw Trace Data</span>
                <button class="modal-close" id="modalClose">&times;</button>
            </div>
            <pre class="modal-code" id="jsonCode"></pre>
        </div>
    </div>

    <script src="/static/app.js"></script>
</body>
</html>
